<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Urban Atlas â€” Residential Population Density</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=Space+Mono:wght@400;700&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;1,9..40,300&display=swap" rel="stylesheet">
</head>
<body>

<div id="page">
  <!-- LEFT SIDEBAR -->
  <div id="sidebar">
    <button class="city-btn on" data-c="-0.10,51.505,10.4" data-name="London">LON</button>
    <button class="city-btn" data-c="2.17,41.39,10.8" data-name="Barcelona">BCN</button>
    <button class="city-btn" data-c="4.89,52.37,10.8" data-name="Amsterdam">AMS</button>
    <button class="city-btn" data-c="13.40,52.52,10.2" data-name="Berlin">BER</button>
    <button class="city-btn" data-c="12.49,41.89,10.5" data-name="Rome">ROM</button>
    <button class="city-btn" data-c="2.35,48.86,10.4" data-name="Paris">PAR</button>
    <button class="city-btn" data-c="-3.70,40.42,10.5" data-name="Madrid">MAD</button>
    <button class="city-btn" data-c="-15.42,28.10,11.8" data-name="Las Palmas">LPA</button>
    <button class="city-btn" data-c="-74.00,40.71,10.2" data-name="New York">NYC</button>
    <button class="city-btn" data-c="139.69,35.69,10.2" data-name="Tokyo">TKY</button>
    <div class="side-spacer"></div>
    <div class="side-label">Urban Atlas</div>
  </div>

  <!-- TOP BAND -->
  <div id="top-band">
    <div class="title-group">
      <h1 id="city-title">London</h1>
      <span class="subtitle">Residential Population Density</span>
    </div>
    <div class="bins-row" id="bins-row"></div>
  </div>

  <!-- MAP FRAME -->
  <div id="map-frame">
    <div id="map"></div>
    <div id="grain-canvas"></div>
    <div id="tip">
      <div class="tp" id="t-pop"></div>
      <div class="ts">people per hex cell</div>
      <div class="tc" id="t-cat"></div>
      <div class="tl" id="t-lc"></div>
      <div class="tb" id="t-bar"></div>
      <div class="td" id="t-det"></div>
    </div>
  </div>

  <!-- BOTTOM BAND -->
  <div id="bot-band">
    <div class="scale-block">
      <div class="north-arrow" id="north-arrow">
        <svg width="38" height="38" viewBox="0 0 60 60">
          <line x1="30" y1="0" x2="30" y2="60" stroke="#C2385A" stroke-width="0.6"/>
          <line x1="0" y1="30" x2="60" y2="30" stroke="#C2385A" stroke-width="0.6"/>
          <circle cx="30" cy="30" r="24" fill="none" stroke="#C2385A" stroke-width="1.8"/>
          <circle cx="30" cy="30" r="20" fill="none" stroke="#C2385A" stroke-width="0.6"/>
          <rect x="27" y="6" width="6" height="24" fill="#C2385A"/>
          <text x="30" y="-3" text-anchor="middle" font-family="Syne,sans-serif" font-size="7" font-weight="800" fill="#C2385A">N</text>
        </svg>
      </div>
      <div class="scale-wrapper">
        <svg id="scale-svg"></svg>
      </div>
      <span class="scale-ratio" id="scale-ratio"></span>
    </div>

    <div class="legend-block">
      <div class="legend-title">Land Use &middot; Shape Grammar</div>
      <div class="legend-row">
        <div class="leg-item">
          <svg viewBox="0 0 14 14">
            <circle cx="7" cy="7" r="6" fill="none" stroke="rgb(176,112,128)" stroke-width="0.8"/>
            <circle cx="7" cy="7" r="3" fill="rgb(194,56,90)" opacity="0.8"/>
          </svg>
          <span>Residential</span>
        </div>
        <div class="leg-item">
          <svg viewBox="0 0 14 14">
            <circle cx="7" cy="7" r="6" fill="none" stroke="rgb(176,112,128)" stroke-width="0.8"/>
            <rect x="3" y="3" width="8" height="8" fill="rgb(72,168,69)" opacity="0.6" rx="0.3"/>
          </svg>
          <span>Park &middot; Forest</span>
        </div>
        <div class="leg-item">
          <svg viewBox="0 0 14 14">
            <rect x="1" y="1" width="12" height="12" fill="none" stroke="rgb(176,112,128)" stroke-width="0.8"/>
            <rect x="3" y="3" width="8" height="8" fill="none" stroke="rgb(43,33,80)" stroke-width="1"/>
          </svg>
          <span>Commercial &middot; Industrial</span>
        </div>
        <div class="leg-item">
          <svg viewBox="0 0 14 14">
            <circle cx="7" cy="7" r="6" fill="none" stroke="rgb(176,112,128)" stroke-width="0.8"/>
            <polygon points="7,3 11,7 7,11 3,7" fill="rgba(74,128,128,0.7)"/>
          </svg>
          <span>Institutional</span>
        </div>
        <div class="leg-item">
          <svg viewBox="0 0 14 14">
            <rect x="2" y="2" width="10" height="10" fill="rgb(62,107,138)" opacity="0.35" rx="0.3"/>
          </svg>
          <span>Water</span>
        </div>
        <div class="leg-item" style="margin-left:4px;opacity:0.5;">
          <svg viewBox="0 0 14 14">
            <circle cx="7" cy="7" r="6" fill="none" stroke="rgb(176,112,128)" stroke-width="0.8" stroke-dasharray="2,1.5"/>
          </svg>
          <span>Absence = infrastructure</span>
        </div>
      </div>
    </div>

    <div class="source-text">
      After Passonneau &amp; Wurman 1966<br>
      Kontur &middot; Overture Maps &middot; H3 res 8
    </div>
  </div>
</div>

<script type="module" src="/src/main.ts"></script>
</body>
</html>
